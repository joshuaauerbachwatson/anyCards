    <h2>
        <a name="Basics">Card Manipulation Basics</a>
    </h2>
	<p>
		To familiarize yourself with how to move cards and use boxes, it is
		helpful play for a while in "solitaire mode".  When starting the game,
        set yourself as leader and set the number of players to 1.  Touch <b>Play</b> to
        reveal the "setup" screen", then touch <b>Setup complete</b>.  You can then
		experiment with the features discussed here.
	</p>
	<p><img alt="cards and boxes" src="./cardsAndBoxes.png" style='height: 100%; width: 100%; object-fit: contain'>
        The illustration shows examples of cards (both face up and face
		down) and boxes which contain cards. As you work through the details
		of this section, you should eventually be able to reproduce the
		illustration pretty closely (suits and denominations will differ
		because cards are always shuffled randomly).</p>
	<p>Some Details follow.
	
	<h3>Turning cards over</h3>
	<p>Tapping a card that is not covered by other cards will cause it
		to turn over, unless the card is the top card of a deck or discard
		box. For those special cases, tapping the top card simply "dislodges"
		it from the box, allowing it to turned over with a second tap or moved
		away.</p>
	<h3>Bringing cards to the front</h3>
	<p>Tapping a card that is partly covered by other cards will bring
		the card to the front so that it is no longer covered. After that it
		can be tapped again to turn it over or it can be dragged by itself. A
		card that is completely covered by other cards (so that it cannot be
		tapped) remains covered until the covering cards are removed.</p>
	<h3>Dragging cards</h3>
	<p>Cards may be dragged around the table-top view as part of play.
		If a card is not covered by any other card, it will be dragged by
		itself. If a card is partly covered by other cards, the cards covering
		the dragged card are dragged with it. In addition, cards that cover
		any other card being dragged will also be dragged. So, in the
		illustration, if you drag the nine of diamonds, the king and seven of
		diamonds move with it. If you drag the king, the seven will move with
		it but the nine will not. By first tapping either of the partly
		covered cards you change the relationship, of course. So, if you first
		tap the nine to bring it to the front, and then drag it, it will move
		by itself.</p>

	<h3><a name="Boxes">Boxes</a></h3>

	<p>Boxes hold cards. They also have a "legend" containing an
		optional name label, an access-style indicator (up and/or down arrows or an exclamation mark),
		and a number (in red) indicating how many cards the box is currently
		holding.  The access-style indicator is explained below.</p>

	<p>Cards are added by dragging them until they partially overlap
		the box, at which point they "snap in." Boxes can be moved (their
		cards move with them). To move a box, grab it in the legend area
		(grabbing the card area is interpreted as grabbing the top card).</p>

	<p>
		The leader's initial view of a game, prior to setup, always includes a
		box called "Deck" with all the cards of the playing deck in it. Other
		boxes are produced by <em>dealing</em> and by requesting creation of a
		box (see below).
	</p>

	<h4>Box access styles</h4>

	<p>Possible box access styles are
    <ul><li><em>deck</em> (indicated by an arrow pointing away from the cards)</li>
        <li><em>hand</em> (indicated by an exclamation point)</li>
        <li><em>discard</em> (indicated by an arrow pointing toward the cards)</li>
        <li><em>general</em> (indicated by arrows pointing in both directions)</li>
    </ul>
		Roughly speaking, the symbols indicate that you would most likely be adding
        cards, removing cards, both, or neither. But, the rules are a little more complex,
        with the purpose of avoiding common playing errors.
    </p>

	<p>
		A <em>deck</em> box may contain only face down cards. Cards may not be added to it. The
		top card cannot be turned over in place but it can be moved entirely
		or partially off the box, after which it becomes an ordinary card. The
		deck box in the illustration happens to have the <em>name</em> "Deck", too,
		but, a box's name is distinct from its access-style.
	</p>

	<p>
		A <em>hand</em> box is usually the result of dealing and are only offered when there is a private hand area.
        The cards in the box are always face down
        and cannot be added to or removed individually.  A player may "take" a hand box, causing its
        contents to move into the private hand area, where the cards are turned face up.
    </p>
    
    <p>
        A <em>discard</em> box may contain only face up cards.  Cards may be added
		the box (and will automatically turn face up). The top card may also be dragged off
        (but not turned over in place). In some games, taking the top card from the discard
        pile is allowed, hence it is allowed with a discard box.
    </p>
    
    <p>Some discard boxes have an "auto-yield" property (not visible), which can be selected when
        box is created.  This property causes a player's turn to end as a side-effect of adding a card
        to the discard box.  In <em>some</em> games this is a convenience, which tends to speed up the game
        because players don't have to both discard and touch the <b>End Turn</b> button.  This setting is not
        appropriate for all games.
    </p>
    
	<p>
		A <em>general</em> box may
		contain both face up and face down cards. If face up cards are added
		they go to the top of the pile and remain face up. If face down cards
		are added they go to the bottom and remain face down.  The top card of a
        general box can always be removed.
	</p>
	
	<h4>Box ownership</h4>

	<p>In some games, after a deal, there may be a box for each player (often a hand, but sometimes an "owned deck").
		A common error in such games is drawing or turning over a card from
		the wrong box. To avoid these errors, a box may be owned by a specific
		player. Only that player may add or remove cards, turn over the top
		card, take it (if it is a hand) or change the box's characteristics. Boxes become owned as a
		result of dealing (this feature can be turned off in the dealing
		dialog), at creation time (in which case they are owned by the
		creator), or in the box modification dialog.</p>
		
	<h4>Creating and modifying boxes</h4>

	<p>You can create a box using a long press in an area where there
		is room for the box. There will usually be room unless there are
		multiple other boxes nearby. Only other boxes can interfere with box
		creation; if there are cards overlapping the new box they are
		immediately "snapped" up into the box.</p>

	<p>Before actualy creating the box, you will be presented with a
		dialog that looks like the picture. <img alt='box characteristics menu' src="./ModifyBoxMenu.png"
            style='height: 100%; width: 100%; object-fit: contain'>
        You can set the access style (or
		"kind of box") to "General", "Hand", ""Deck", "Discard", or "Discard (yield)".
        You can also specify the name of the box, and indicate whether you want to own the
		box.</p>

	<p>Once a box is created (unless it is owned by another player),
		you can access special actions for it by tapping in the legend. A long
		press on the cards will also bring up the dialog. The result will look
		something like the nearby picture. <img alt="Box menu" src="./GridBoxMenu.png">
        Not all of the buttons in the
		picture will necessarily appear, depending on the state of the box and
		of the game.</p>

	<p>The <b>Take Hand</b> action only appears if the box is a hand and the game has been set up with a private
	hand area.  The result is to move all the cards of the box into the private hand area and
	delete the box.  This action is typically performed by each player after a deal in a game that
	has private hands.</p>
	
	<p>The <b>Turn Over</b> action applies only to "Deck" and "Discard" boxes.  It changes the former
	into the latter (and vice versa) while reversing the order of the cards, exactly as if you turned
	the pile of cards over in its entirety.</p>
	
	<p>The <b>Shuffle</b> action randomizes the order of cards in the box without changing anything else
	about it.  Note that the initial "Deck" box at the start of a game is already shuffled.  But, shuffling
	may be appropriate at other times.</p>
	
	<p>
		The <b>Deal</b> action produces new boxes (or just piles of cards) from some or all of the
		contents of an existing box.  It is only available when the "dealing area" is free of existing
        cards and boxes.  This area is at the bottom of the playing area (above the private hand area if
        there is one) and occupies the width of the screen for the height necessary to fit the results of the
        deal.
    </p>
    <img alt="Deal Dialog" src="./DealDialog.png">
    <p>
        The details of the deal are guided by a popup,
		as shown in the picture.  The number of players is reprised in the popup since there will always be
        one target per player.  The number of cards per target is selectable from 2 up to the maximum number that
        can be dealt from the source box.  The type of targets to produce is also selectable as <b>Hands</b>, <b>Piles</b>,
        <b>Owned Decks</b>, <b>Shared Decks</b>, <b>Owned Discards</b>, or <b>Shared Discards</b>.  As discussed
        elsewhere, <b>Hands</b> <b>Decks</b> and <b>Discards</b> are kinds of boxes.  Hands are always owned, whereas
        the other two target types may be owned or not as you wish.  The <b>Piles</b> target produces a pile of cards
        that is not in a box and will behave in accordance with the normal rules for moving cards.
    </p>

	<p>
		The <b>Modify</b> action brings up the dialog shown earlier for box
		creation. it allows you to change a box's name, access style, or <b>Owned</b>
		indicator. But, note that you will not be able to get to this point if
		the box is owned by a player other than you. So, in practice this
		allows you give up ownership if you own the box, or to take ownership
		of an unowned box.  Note also that hands are always owned and that cannot be
        changed in the dialog.
	</p>

	<p>
		The <b>Delete</b> action deletes a box. Note that this does not delete
		the cards that are in the box. They are left in place in an ordinary
		"pile" from which they can then be moved in accordance with the
		general rules for cards. To undo this action, a long press on the pile
		of cards will bring up the box creation dialog and cause the cards
		left in the pile to belong to the new box (a newly created box always
		"snaps up" cards that it overlaps).
	</p>
	
	<h3><a name="Hands">The Private Hands Area</a></h3>

	<p>Depending on how the game is set up, there may be a private hand
		area at the bottom of the screen (separated from the playing area by a
		horizonal line). You can drag cards into and out of this area. A card
		will "snap into" the private area if more than half its height falls
		within that area or will "snap out" (back into the public area) if
		less than half its height is there. Cards in the private area are not
		visible to other players.
    </p>
    <p>
        Bear in mind that cards do not turn over
		automatically when snapping in or out of the private area (if they are
		face up they remain face up). Often you will want to drag a card into
		the private area while it is face down and only turn it over once it
		is in the private area.
    </p>
    <p>
        A common paradign for using the private area is
        for a player to perform a deal specifying <b>Hands</b> as the target.  Each hand belongs
        to a player, who can then "take" the hand when that player's turn comes.
        The easiest way to take a hand is to touch or start dragging the top
        card of the hand.  The hand will react by moving the cards to the private area
        and turning them face up.
    </p>

	<br>
	<hr>
	<h2>
		<a name="Setup">Setting up a Game</a>
	</h2>

    <p>
		As discussed previously, exactly one player will have the role of
		leader. That player will have a <b>Setup Game</b> button. Touching
		this button brings up a dialog, as shown. The actions in the dialog
		may be only part of what it means to set up the game. Other chores
		might consist of making additional boxes and arranging both cards and
		boxes in the appropriate configuration for the game.
	</p>

	<p>
		Setting up a game may be done either before connecting the players or
		afterwards, but, in either case, the setup phase is considered to be
		part of the leader's first turn to play (the leader always plays
		first). When the leader finishes setting up, the leader can yield to
		the next player (who then has the first real move in the game) or the
		leader may take that first move and then yield. Once the leader's
		first turn ends, the <b>Setup Game</b> button is no longer displayed.
	</p>

	<p>
		The <b>Deck Type</b> decides the repertoire of cards that will be part
		of the game. The <b>Standard</b> deck consists of the 52 cards, ace
		through king, of suites spades, hearts, diamonds and clubs, with no
		jokers. In general, the playing deck can have any subset of these
		cards and up to two jokers. The repertoire can then be multiplied,
		duplicating each card the desired number of times.
	</p>
	
	<p>
		In practice, the capability to design an arbitrary deck is not
		exposed to users, so you have to select from a set of named decks,
		which you can do by first touching the current selection to bring up
		the complete list, then touching the desired selection.
		<dl>
		<dt>WithJokers</dt><dd>adds two jokers to the standard deck</dd>
		<dt>Double</dt><dd>has two of each card in the standard deck</dd>
		<dt>DoubleWithJokers</dt><dd>has two of each card in the <b>WithJokers</b> deck</dd>
		<dt>Piquet</dt><dd>omits the face cards two through six from the standard deck, leaving 32
		cards, as in the game of Piquet</dd>
		<dt>Euchre</dt><dd>omits the face cards two through eight from the standard deck, leaving 24
		cards, as in the game of Euchre</dd>
		<dt>Bezique</dt><dd>the <b>Piquet</b> deck with two of each card (64 cards, as in the game of
		Bezique)</dd>
		<dt>Pinochle</dt><dd>the <b>Euchre</b> deck with two of each card (48 cards, as in the game of
		Pinochle)</dd>
		</dl>
		In the future, we will add more deck types, and will likely add the ability to
		design your own decks, but the details are not decided yet.
	</p>
	
	<p>
		The <b>Private Hand Area</b> control determines whether there is an area reserved at the
		bottom of the screen that is private to each player and not shared.  Touch the current
		setting to toggle between <b>Present</b> and <b>Absent</b>.
	</p>

	<p>
		The <b>Deal</b> action opens the dealing dialog on the one box on the
		screen that has the name "Deck" (this box is always present in a new game
		that has not yet been set up). It allows you to create new deck boxes
		containing the "hands" for the game.  These may be left as boxes or converted
		into actual hands (in the private hand area) by each player on his first turn.
	</p>

	<p>
		The <b>Save As</b> action permits you to save the current game setup
		for later use, assigning it a name to remember it by. Note that the
		entire state of the screen is saved, not just the attributes
		controlled by this dialog. So, a common practice is to first use the
		dialog to establish the deck type and private hand setting and to deal
		the cards. Then, exit the dialog and perform other actions (like
		creating discard boxes and positioning things on the screen). Then
		return to the setup dialog and save the setup.
	</p>

	<p>
		The <b>Use Saved Setup</b> action brings up a list of saved setups which you can
		select by name.  The saved setup will replace current game state.  This dialog
		also allows you delete saved setups by sliding entries to the left to reveal a delete
		button (a common iOS interaction paradigm).
	</p>
	
	<p>
		It is useful to understand what is and isn't saved and restored when you use this capability.
		The exact card denominations are <em>not</em> restored as such (otherwise you would be playing
		the identical shuffle and deal over and over again).  Rather, the positions of all the cards and boxes,
		the properties of the boxes, and which cards are face up or face down are restored, but then the
		actual cards are re-shuffled within this framework so that you are always playing with a fresh
		shuffle and deal.  
	</p>
	
	<p>
		The <b>Reset</b> action restores the playing area to its state prior to dealing or moving any 
		cards.  This is useful if you make a hard-to-undo mistake while setting up a game.
	</p>
	
	<br>
	<hr>
	<h2>
		<a name="Playing">Playing and Ending a Game</a>
	</h2>

	<p>Once the players have found each other, the top area of the
		leader's screen will look like the first picture and other players
		will have a top area that looks more like the second picture.</p>

	<p>
		The top row of boxes list the players of the game, in the same order
		on every player's screen. The leader is always listed first. The
		player whose turn it is colored green. On each player's device, the
		player who owns that device is highlighted with asterisks and italics.
		Note in the two pictures that <b>Putt-putt</b> is green in both
		pictures but only highlighted with asterisks and italics in the first
		picture (showing the screen belonging to the player called Putt-putt).
		The screen belonging to the player called Joshie has Joshie
		highlighted with asterisks and italics.
	</p>

	<p>
		All players have an <b>End Game</b> button, which they can touch at
		any time. Any player can end the game pre-emptively at any time by
		pressing this button. Terminating the app or suspending it will also
		end the game for everyone.
	</p>

	<p>
		The player whose turn it is (but not other players) will have a <b>Yield</b>
		button. This button ends the player's turn and passes the right to
		play on to the next player in the rotation.
	</p>

	<p>Only the player whose turn it is may move or modify the cards
		and boxes on the playing screen. There is an exception for cards in
		your private hand. These may be moved or turned over at any time as
		long as they stay within the private hand area. You will only be able
		to move cards into or out of the this area when it is your turn.</p>

	<p>
		Note that the leader's screen shows the <b>Setup Game</b> button. This
		will continue to show until the leader touches <b>Yield</b> for the
		first time, ending his very first turn. Recall that the chore of
		setting up the game belongs to the leader and must be completed by the
		end of his first turn.
	</p>
	
	<p>Beyond the enforcement of "whose turn is it", and the limitations imposed by box access
	styles and box ownership, there are no real rules.  The AnyCards app does not know what card
	game is being played.</p>
